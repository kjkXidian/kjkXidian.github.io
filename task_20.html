<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>task20：基础JavaScript练习</title>
		<style type="text/css">
			section {
				width: 480px;
				margin: 36px auto;
			}
			
			textarea {
				width: 100%;
				height: 54px;
			}
			
			div {
				padding: 8px 12px;
				float: left;
				margin: 12px 6px;
				background-color: red;
				cursor: pointer;
				color: white;
			}
			
			.blue {
				color: blue;
			}
		</style>
		<script type="text/javascript">
			$ = function(s) {
				return document.querySelector(s);
			}
			
			window.onload = function() {
				var article = $("article"); //获取article
				var input = $("input");
				var textarea = $("textarea");
				var btn1 = $("#btn1"); //获取按钮1
				var btn2 = $("#btn2"); //获取按钮2
				var arrStr = [];
				//为按钮1添加点击监听事件
				btn1.addEventListener("click", function() {
					var str = textarea.value.trim();
					var arrWord = str.split(/[^0-9a-zA-Z\u4e00-\u9fa5]+/).filter(function(e) {
						if (e != null && e.length > 0) {
							return true;
						} else {
							return false;
						}
					});
					arrStr = arrStr.concat(arrWord);
					creatDiv("");
				});
				//为按钮2添加点击监听事件
				btn2.addEventListener("click", function() {
					var keyWord = input.value.trim();
					if(keyWord == ""){
						alert("请输入关键字！");
						return false;
					}
					creatDiv(keyWord);
				});
				function creatDiv(key){
					article.innerHTML = "";
				for (var i = 0; i < arrStr.length; i++) {
						var innerDiv = document.createElement("div");
						var text = document.createTextNode(arrStr[i]);
						innerDiv.appendChild(text);
						if(key != ""){
							var reg = eval("/"+key+"/ig");
							innerDiv.innerHTML = innerDiv.innerHTML.replace(reg, "<i class='blue'>" + key + "</i>");
						}
						article.appendChild(innerDiv);
					}
			}
			}
			
			
		</script>
	</head>

	<body>
		<section>
			<textarea></textarea>
			<button id="btn1">插入</button>
			<input placeholder="请输入查询内容" />
			<button id="btn2">查询</button>
			<article></article>
		</section>
	</body>

</html>